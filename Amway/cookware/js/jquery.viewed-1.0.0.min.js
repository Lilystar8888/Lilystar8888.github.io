(function(a){typeof define==="function"&&define.amd?define(["jquery","extend"],a):a(jQuery)})(function(){$.fn.viewed=function(a,c){if($.isFunction(a)){c=a;a=1e3}var e=this.filter(function(){return!$(this).data("viewed")}).data("viewed",!0);function d(){e.each(function(){var b=$(this),e=$(document).scrollTop(),d=$(document).scrollLeft(),h=$(window).height(),i=$(window).width(),a=b.offset(),g=b.data("cur-viewed");b.data("pre-viewed",g);var f=e<=a.top&&a.top<e+h&&d<=a.left&&a.left<d+i;b.data("cur-viewed",f);!g&&f&&c.apply(this)})}var b;$(window).bind("scroll resize"+($.isMobile?" touchend":""),function(){clearTimeout(b);b=setTimeout(d,a)}).scroll()}})