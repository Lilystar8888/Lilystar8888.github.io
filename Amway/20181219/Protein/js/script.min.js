function scrollAni(e){var n=new TimelineMax;switch(e){case 0:kvAni("#kv",n);break;case 1:testAni("#s1",n);break;case 2:infoAni("#s2",n);break;case 3:infoAni(".main:eq(0)",n);break;case 4:infoAni(".main:eq(1)",n);break;case 5:breakfastAni("#s4",n),recipeAni("#recipe",n)}}function kvAni(e,n){var a=$(e),t=$("#product");n.addLabel("product_in",.55),n.insertMultiple([TweenMax.to(t,.4,{autoAlpha:1,ease:Linear.easeNone}),TweenMax.fromTo(t,.7,{xPercent:20},{xPercent:0,ease:Power4.easeOut})],"product_in"),n.addLabel("cloud_in",1.5),n.insertMultiple([TweenMax.staggerTo(t.find("span"),1.5,{autoAlpha:1,ease:Linear.easeNone},.2),TweenMax.staggerFromTo(t.find("span"),1.4,{scale:.5},{scale:1,ease:Power3.easeOut},.15),TweenMax.staggerFromTo(t.find("span"),1.3,{yPercent:20},{yPercent:0,ease:Power3.easeOut},.15)],"cloud_in"),n.addLabel("slogan_in",2),n.insertMultiple([TweenMax.to(a.find("h1"),.7,{autoAlpha:1,ease:Linear.easeNone}),TweenMax.fromTo(a.find("h1"),1,{yPercent:20},{yPercent:0,ease:Power3.easeOut})],"slogan_in"),n.addLabel("btn_in",2.8),n.insertMultiple([TweenMax.to(a.find("#goTest"),.4,{autoAlpha:1,ease:Linear.easeNone}),TweenMax.fromTo(a.find("#goTest"),.7,{yPercent:20},{yPercent:0,ease:Power3.easeOut})],"btn_in")}function testAni(e,n){var a=$(e);n.addLabel("s1_in",.55),n.insertMultiple([TweenMax.staggerTo(a.find(".content"),.4,{autoAlpha:1,ease:Linear.easeNone},.2),TweenMax.staggerFromTo(a.find(".content"),.7,{yPercent:10},{yPercent:0,ease:Power4.easeOut},.2)],"s1_in")}function infoAni(e,n){var a=$(e);n.addLabel("tit_in",.55),n.insertMultiple([TweenMax.to(a.find(".title"),.4,{autoAlpha:1,ease:Linear.easeNone})],"tit_in"),n.addLabel("info_in",1),n.insertMultiple([TweenMax.staggerTo(a.find(".step"),.4,{autoAlpha:1,ease:Linear.easeNone},.2),TweenMax.staggerFromTo(a.find(".step"),.7,{yPercent:10},{yPercent:0,ease:Power4.easeOut},.2)],"info_in"),n.addLabel("btn_in",1.9),n.insertMultiple([TweenMax.to(a.find(".btn"),.4,{autoAlpha:1,ease:Linear.easeNone})],"btn_in")}function breakfastAni(e,n){var a=$(e);n.addLabel("tit_in",.55),n.insertMultiple([TweenMax.to(a.find(".title"),.4,{autoAlpha:1,ease:Linear.easeNone})],"tit_in"),n.addLabel("h6_in",1),n.insertMultiple([TweenMax.to(a.find("h6"),.4,{autoAlpha:1,ease:Linear.easeNone}),TweenMax.fromTo(a.find("h6"),.7,{yPercent:10},{yPercent:0,ease:Power4.easeOut})],"h6_in"),n.addLabel("p_in",1.6),n.insertMultiple([TweenMax.to(a.find("p"),.4,{autoAlpha:1,ease:Linear.easeNone}),TweenMax.fromTo(a.find("p"),.7,{yPercent:10},{yPercent:0,ease:Power4.easeOut})],"p_in")}function recipeAni(e,n){var a=$(e);n.addLabel("btn_in",2),n.insertMultiple([TweenMax.staggerTo(a.find("button"),.4,{autoAlpha:1,ease:Linear.easeNone},.22)],"btn_in")}function onYouTubeIframeAPIReady(){var e=$vidPlay.data("video");player=new YT.Player("player",{fitToBackground:!0,height:"100%",width:"100%",videoId:e,playerVars:{controls:2,showinfo:0,autohide:0,rel:0,iv_load_policy:3,modestbranding:1},events:{onReady:video.onPlayerReady,onStateChange:video.onPlayerStateChange}})}function scrollToDom(e,n){n&&portrait&&$hamburger.trigger("click"),$body.stop().animate({scrollTop:$(e).offset().top},1e3,"swing")}function popup(e,n,a){if(scrollLock=!0,$(e).fadeIn(300),mirror&&$result.addClass("hide"),n){var t=$(a).index();$recipeDetail.find(".flex-control-nav li").eq(t).find("a").trigger("click"),$recipeDetail.removeClass("hide")}}function popoff(e){scrollLock=!1,$(".popup").fadeOut(300,function(){mirror&&$result.removeClass("hide")}),e&&$recipeDetail.addClass("hide")}function userAgentChk(){var e=window.navigator.userAgent.toLowerCase(),n=/line/.test(e),a=/fbav/.test(e);(n||a)&&alert("請以Safari或是Chrom開啟網頁以達網站最佳效能！")}var ar=ar||{},$body=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),$window=$(window),$wrapper=$(".wrapper"),$header=$("header"),$hamburger=$("#hamburger"),$block=$(".block"),$recipeDetail=$("#recipeDetail"),$gotop=$("#gotop"),hash=location.hash.split("#")[1],index=$("#index").length,page=$(".page").length,mirror=$("#mirror").length,$result=$("#result"),video=video||{},$youtube=$("#youtube"),$vidPlay=$("#play"),videoId="",player,desktop=$("html.desktop").length,mobile=$("html.mobile").length,portrait=$("html.portrait").length,scrollTop=0,scrollLock=!1;ar={init:function(){$wrapper.animate({opacity:1},500,"linear",function(){hash&&index&&(scrollToDom("#s"+hash),location.hash="")}),index&&this.scrollEvent()},res:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},nav:function(e){index?scrollToDom("#s"+e,1):1==e?location.href="vitality.html":location.href="index.html#"+e},scrollEvent:function(){var e=parseInt(.35*ar.res.height),n=[],a=$block.length;$block.each(function(){n.push($(this).offset().top)}),$window.scroll(function(){scrollLock&&$window.scrollTop(scrollTop),scrollTop=$window.scrollTop(),scrollTop>20?$header.hasClass("on")||$header.addClass("on"):$header.removeClass("on"),scrollTop>.5*ar.res.height&&!portrait?$gotop.is(":hidden")&&$gotop.fadeIn(300):$gotop.fadeOut(300),scrollTop>ar.res.height*(a-1)?$gotop.addClass("up"):$gotop.removeClass("up"),$.each(n,function(n,a){if(scrollTop-a>=-e&&e>scrollTop-a){var t=$block.eq(n);index&&n>0&&$("nav").find("button").removeClass("on").eq(n-1).addClass("on"),t.hasClass("animated")||(t.addClass("animated"),scrollAni(n))}})}).scroll()},resizer:{init:function(){ar.res.width=document.documentElement.clientWidth,ar.res.height=document.documentElement.clientHeight}}},video={init:function(){var e=document.createElement("script");e.src=("https:"==location.protocol?"https":"http")+"://www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},onPlayerReady:function(){$vidPlay.on("click",function(){return video.playerPlay(),!1})},onPlayerStateChange:function(e){0==e.data&&video.playerClose()},playerPlay:function(){$youtube.fadeIn(300,function(){player.playVideo(),ga("send","event","index-video","click","影片播放",1)})},playerClose:function(){$youtube.fadeOut(300,function(){player.pauseVideo(),ga("send","event","index-video","click","影片關閉",1)})}},$(function(){userAgentChk(),$(window).load(function(){page&&ar.init()})}),$(window).resize(function(){ar.resizer.init()});
