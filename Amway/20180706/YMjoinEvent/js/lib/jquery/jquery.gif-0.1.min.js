/*! 
	Author: Ammon Lin
	version : 0.1
	All right reserved.
*/
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){var r=function(){var n=document.createElement("canvas");return!!(n.getContext&&n.getContext("2d"))}(),i={loop:!0,frames:0,spf:1e3/30,time:{},useCanvas:!0,filename:function(n){return"frames/"+n+".jpg"}},t={progress:"gif:progress",loaded:"gif:loaded",end:"gif:end"};n.fn.gif=function(u){var f=n.extend({},i,u);return f.loop===!1&&(f.loop=1),this.each(function(){var u=f.loop,e,i,o;if(f.frames<1)throw"[jquery gif] frames must great than zero";for(e=n.Deferred().resolve(),i=n(this),o=0;o<f.frames;o++)(function(r){e=e.then(function(){return i.trigger(t.progress,~~(r/f.frames*100)),n.get(f.filename(r))})})(o);i.data("deferred",e.then(function(e){var o=0,a=f.frames,s,l,e;i.trigger(t.progress,100).trigger(t.loaded);var h=n('<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />'),c=n('<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />'),y=!/\.png$/i.test(f.filename(0));f.useCanvas&&r?(s=document.createElement("canvas"),s.width=i.width(),s.height=i.height(),i.append(s),l=s.getContext("2d"),e=h.load(function(){l.clearRect(0,0,s.width,s.height);l.drawImage(h[0],0,0)})[0],function v(){var n=f.time[o]||f.spf;if(e.src=f.filename(o++),o%=a,u!==!0&&o==0&&--u==0)return i.trigger(t.end);setTimeout(v,n)}()):(h.add(c).hide().appendTo(i),function v(){var n=f.time[o]||f.spf,r=h.toggle(y);if(h=c.show(),c=r,h[0].src=f.filename(o++),c[0].src=f.filename(o%=a),u!==!0&&o==0&&--u==0)return i.trigger(t.end);setTimeout(v,n)}())}))})};n.fn.gif.settings=i;n.fn.gif.events=t});