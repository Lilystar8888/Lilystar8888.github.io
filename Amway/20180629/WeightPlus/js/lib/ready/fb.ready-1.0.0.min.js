(function(n){typeof define=="function"&&define.amd?define(["jquery","fb","global"],n):n(jQuery)})(function(){var t=$.fb.init(),n=$.Deferred();$.fb.Login=$.fb.getLoginStatus();$.fb.Connected=n.promise();$.fn.requireFB&&($.requireFB=$('<a href="javascript:"><\/a>').attr("requireFB","").hide().one($.fn.requireFB.events.CONNECT_SUCCESS,n.resolve).appendTo("body"),$.fb.Login.always(function(){$.requireFB.requireFB();$("body").on("click",".requireFB",function(){var n=$(this);$.requireFB.one($.fn.requireFB.events.REQUIRE_FB_SUCCESS,function(){n.trigger($.fn.requireFB.events.REQUIRE_FB_SUCCESS)}).click()})}));$.fb.Login.done(n.resolve);Config.needLogin&&$.fb.Login.fail(function(){$.fb.connect.redirect()})});