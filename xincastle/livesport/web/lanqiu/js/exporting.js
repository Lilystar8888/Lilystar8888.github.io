(function(f){"object"===typeof module&&module.exports?module.exports=f:f(Highcharts)})(function(f){var x=f.win,m=x.document,D=f.Chart,y=f.addEvent,E=f.removeEvent,F=f.fireEvent,n=f.createElement,v=f.discardElement,A=f.css,p=f.merge,q=f.each,u=f.extend,H=f.splat,I=Math.max,J=f.isTouchDevice,K=f.Renderer.prototype.symbols,w=f.getOptions(),C;u(w.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",
contextButtonTitle:"Chart context menu"});w.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:J?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};
w.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",
onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};f.post=function(a,b,d){var c;a=n("form",p({method:"post",action:a,enctype:"multipart/form-data"},d),{display:"none"},m.body);for(c in b)n("input",{type:"hidden",name:c,value:b[c]},null,a);a.submit();v(a)};u(D.prototype,{sanitizeSVG:function(a){return a.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+:)?href=/g,
" xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g,
" ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(b){return b.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(a){var b=this,d,c=p(b.options,a),B=c.exporting.allowHTML;m.createElementNS||(m.createElementNS=function(b,a){return m.createElement(a)});var k=n("div",null,{position:"absolute",top:"-9999em",width:b.chartWidth+"px",height:b.chartHeight+"px"},m.body);var h=b.renderTo.style.width;var g=b.renderTo.style.height;h=c.exporting.sourceWidth||
c.chart.width||/px$/.test(h)&&parseInt(h,10)||600;g=c.exporting.sourceHeight||c.chart.height||/px$/.test(g)&&parseInt(g,10)||400;u(c.chart,{animation:!1,renderTo:k,forExport:!0,renderer:"SVGRenderer",width:h,height:g});c.exporting.enabled=!1;delete c.data;c.series=[];q(b.series,function(a){d=p(a.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:a.visible});d.isInternal||c.series.push(d)});a&&q(["xAxis","yAxis"],function(b){q(H(a[b]),function(a,d){c[b][d]=p(c[b][d],a)})});var l=
new f.Chart(c,b.callback);q(["xAxis","yAxis"],function(a){q(b[a],function(b,c){var d=l[a][c],e=b.getExtremes(),g=e.userMin;e=e.userMax;d&&(void 0!==g||void 0!==e)&&d.setExtremes(g,e,!0,!1)})});h=l.getChartHTML();c=null;l.destroy();v(k);B&&(k=h.match(/<\/svg>(.*?$)/))&&(k='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+k[1]+"</body></foreignObject>",h=h.replace("</svg>",k+"</svg>"));h=this.sanitizeSVG(h);return h=h.replace(/(url\(#highcharts-[0-9]+)&quot;/g,
"$1").replace(/&quot;/g,"'")},getSVGForExport:function(a,b){var d=this.options.exporting;return this.getSVG(p({chart:{borderRadius:0}},d.chartOptions,b,{exporting:{sourceWidth:a&&a.sourceWidth||d.sourceWidth,sourceHeight:a&&a.sourceHeight||d.sourceHeight}}))},exportChart:function(a,b){var d=this.getSVGForExport(a,b);a=p(this.options.exporting,a);f.post(a.url,{filename:a.filename||"chart",type:a.type,width:a.width||0,scale:a.scale||2,svg:d},a.formAttributes)},print:function(){var a=this,b=a.container,
d=[],c=b.parentNode,f=m.body,k=f.childNodes;a.isPrinting||(a.isPrinting=!0,a.pointer.reset(null,0),F(a,"beforePrint"),q(k,function(a,b){1===a.nodeType&&(d[b]=a.style.display,a.style.display="none")}),f.appendChild(b),x.focus(),x.print(),setTimeout(function(){c.appendChild(b);q(k,function(a,b){1===a.nodeType&&(a.style.display=d[b])});a.isPrinting=!1;F(a,"afterPrint")},1E3))},contextMenu:function(a,b,d,c,f,k,h){var g=this,l=g.options.navigation,r=l.menuItemStyle,t=g.chartWidth,p=g.chartHeight,G="cache-"+
a,e=g[G],z=I(f,k),B,x=function(b){g.pointer.inClass(b.target,a)||w()};if(!e){g[G]=e=n("div",{className:a},{position:"absolute",zIndex:1E3,padding:z+"px"},g.container);var v=n("div",null,u({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},l.menuStyle),e);var w=function(){A(e,{display:"none"});h&&h.setState(0);g.openMenu=!1};y(e,"mouseleave",function(){B=setTimeout(w,500)});y(e,"mouseenter",function(){clearTimeout(B)});y(m,"mouseup",x);y(g,"destroy",
function(){E(m,"mouseup",x)});q(b,function(a){if(a){var b=a.separator?n("hr",null,null,v):n("div",{onmouseover:function(){A(this,l.menuItemHoverStyle)},onmouseout:function(){A(this,r)},onclick:function(b){b&&b.stopPropagation();w();a.onclick&&a.onclick.apply(g,arguments)},innerHTML:a.text||g.options.lang[a.textKey]},u({cursor:"pointer"},r),v);g.exportDivElements.push(b)}});g.exportDivElements.push(v,e);g.exportMenuWidth=e.offsetWidth;g.exportMenuHeight=e.offsetHeight}b={display:"block"};d+g.exportMenuWidth>
t?b.right=t-d-f-z+"px":b.left=d-z+"px";c+k+g.exportMenuHeight>p&&"top"!==h.alignOptions.verticalAlign?b.bottom=p-c-z+"px":b.top=c+k-z+"px";A(e,b);g.openMenu=!0},addButton:function(a){var b=this,d=b.renderer,c=p(b.options.navigation.buttonOptions,a),m=c.onclick,k=c.menuItems,h,g={stroke:c.symbolStroke,fill:c.symbolFill},l=c.symbolSize||12;b.btnCount||(b.btnCount=0);b.exportDivElements||(b.exportDivElements=[],b.exportSVGElements=[]);if(!1!==c.enabled){var r=c.theme,t=r.states,q=t&&t.hover;t=t&&t.select;
var n;delete r.states;m?n=function(a){a.stopPropagation();m.call(b,a)}:k&&(n=function(){b.contextMenu(e.menuClassName,k,e.translateX,e.translateY,e.width,e.height,e);e.setState(2)});c.text&&c.symbol?r.paddingLeft=f.pick(r.paddingLeft,25):c.text||u(r,{width:c.width,height:c.height,padding:0});var e=d.button(c.text,0,0,n,r,q,t).attr({title:b.options.lang[c._titleKey],"stroke-linecap":"round"});e.menuClassName=a.menuClassName||"highcharts-menu-"+b.btnCount++;c.symbol&&(h=d.symbol(c.symbol,c.symbolX-
l/2,c.symbolY-l/2,l,l).attr(u(g,{"stroke-width":c.symbolStrokeWidth||1,zIndex:1})).add(e));e.add().align(u(c,{width:e.width,x:f.pick(c.x,C)}),!0,"spacingBox");C+=(e.width+c.buttonSpacing)*("right"===c.align?-1:1);b.exportSVGElements.push(e,h)}},destroyExport:function(a){a=a.target;var b,d;for(b=0;b<a.exportSVGElements.length;b++)if(d=a.exportSVGElements[b])d.onclick=d.ontouchstart=null,a.exportSVGElements[b]=d.destroy();for(b=0;b<a.exportDivElements.length;b++)d=a.exportDivElements[b],E(d,"mouseleave"),
a.exportDivElements[b]=d.onmouseout=d.onmouseover=d.ontouchstart=d.onclick=null,v(d)}});K.menu=function(a,b,d,c){return["M",a,b+2.5,"L",a+d,b+2.5,"M",a,b+c/2+.5,"L",a+d,b+c/2+.5,"M",a,b+c-1.5,"L",a+d,b+c-1.5]};D.prototype.callbacks.push(function(a){var b,d=a.options.exporting,c=d.buttons;C=0;if(!1!==d.enabled){for(b in c)a.addButton(c[b]);y(a,"destroy",a.destroyExport)}})});