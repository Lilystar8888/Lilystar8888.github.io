(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){function r(d,r){function t(c,e){a.hasContentToSroll&&(b("body").addClass("noSelect"),u=e?f.offset()[g]:l?c.pageX:c.pageY,v&&(document.ontouchmove=function(c){(a.options.touchLock||0<a.contentPosition&&a.contentPosition<=a.contentSize-a.viewportSize-5)&&c.preventDefault();c.touches[0].tinyscrollbarTouch=1;m(c.touches[0])},document.ontouchend=
h),b(document).bind("mousemove",m),b(document).bind("mouseup",h),f.bind("mouseup",h),n.bind("mouseup",h),m(c))}function w(c){if(a.hasContentToSroll){var e=c||window.event;a.contentPosition-=-(e.deltaY||e.detail||-1/3*e.wheelDelta)/40*(1===e.deltaMode?a.options.wheelSpeed:1)*a.options.wheelSpeed;a.contentPosition=Math.min(a.contentSize-a.viewportSize,Math.max(0,a.contentPosition));a.thumbPosition=a.contentPosition/a.trackRatio;d.trigger("move");f.css(g,a.thumbPosition);p.css(g,-a.contentPosition);
if(a.options.wheelLock||0<a.contentPosition&&a.contentPosition<=a.contentSize-a.viewportSize-5)e=b.event.fix(e),e.preventDefault()}c.stopPropagation()}function m(c){if(a.hasContentToSroll){var b=l?c.pageX:c.pageY;c=Math.min(a.trackSize-a.thumbSize,Math.max(0,a.thumbPosition+(c.tinyscrollbarTouch?u-b:b-u)));a.contentPosition=c*a.trackRatio;d.trigger("move");f.css(g,c);p.css(g,-a.contentPosition)}}function h(){a.thumbPosition=parseInt(f.css(g),10)||0;b("body").removeClass("noSelect");b(document).unbind("mousemove",
m);b(document).unbind("mouseup",h);f.unbind("mouseup",h);n.unbind("mouseup",h);document.ontouchmove=document.ontouchend=null}this.options=b.extend({},x,r);this._defaults=x;this._name="tinyscrollbar";var a=this,y=d.find(".viewport"),p=d.find(".overview"),q=d.find(".scrollbar"),n=q.find(".track"),f=q.find(".thumb"),v="ontouchstart"in document.documentElement,z="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",l="x"===this.options.axis,k=l?
"width":"height",g=l?"left":"top",u=0;this.thumbPosition=this.thumbSize=this.trackRatio=this.trackSize=this.contentRatio=this.contentSize=this.viewportSize=this.contentPosition=0;this.hasContentToSroll=!1;this.update=function(c){var b=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();this.viewportSize=y[0]["offset"+b];this.contentSize=p[0]["scroll"+b];this.contentRatio=this.viewportSize/this.contentSize;this.trackSize=this.options.trackSize||this.viewportSize;this.thumbSize=Math.min(this.trackSize,
Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio));this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize);this.hasContentToSroll=1>this.contentRatio;q.toggleClass("disable",!this.hasContentToSroll);switch(c){case "bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case "relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;
default:this.contentPosition=parseInt(c,10)||0}this.thumbPosition=this.contentPosition/this.trackRatio;f.css(g,a.thumbPosition);p.css(g,-a.contentPosition);q.css(k,a.trackSize);n.css(k,a.trackSize);f.css(k,a.thumbSize);return a};a.update();(function(){v&&(y[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),t(a.touches[0]))});f.bind("mousedown",function(a){a.stopPropagation();t(a)});n.bind("mousedown",function(a){t(a,!0)});b(window).resize(function(){a.update("relative")});a.options.wheel&&
window.addEventListener?d[0].addEventListener(z,w,!1):a.options.wheel&&(d[0].onmousewheel=w)})();return a}var x={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};b.fn.tinyscrollbar=function(d){return this.each(function(){b.data(this,"plugin_tinyscrollbar")||b.data(this,"plugin_tinyscrollbar",new r(b(this),d))})}});