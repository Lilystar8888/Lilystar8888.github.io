(function(a){typeof define==="function"&&define.amd?define(["jquery","extend"],a):a(jQuery)})(function(){function a(){!CONST.isRelease&&console.log.apply(console,Array.prototype.slice.call(arguments,0))}var d=null,c=$.Deferred(),b=$.Deferred();$.socketio=function(a){$.extend($.socketio.settings,a);require([$.socketio.settings.ioServer+"/socket.io/socket.io.js"],function(a){d=a;c.resolve()})};$.socketio.connect=function(f,e){c.done(function(){try{_socket=d($.socketio.settings.ioServer+"/"+$.socketio.settings.ioServerNS);_socket.on("connect",function(){a("socket.io","connect",$.socketio.getID());f&&f()});_socket.on("disconnect",function(){a("socket.io","disconnect");e&&e()});b.resolve()}catch(c){a("socket.io","connect_error",c)}})};$.socketio.getID=function(){return _socket?_socket.io.engine.id:null};$.socketio.bind=function(a){b.done(function(){$.each(a,function(a,b){_socket.on(a,b)})})};$.socketio.sendTo=function(c,d,b){a("socket.io","send",c,d,b);_socket.emit("sendTo",{ns:$.socketio.settings.ioServerNS,msg:d,to:c,data:b})};$.socketio.settings={ioServer:CONST.ioServer,ioServerNS:CONST.ioServerNS}})