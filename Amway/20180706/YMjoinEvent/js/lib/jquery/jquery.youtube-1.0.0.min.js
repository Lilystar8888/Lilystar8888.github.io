(function(a){typeof define==="function"&&define.amd?define(["jquery","extend","swfobject"],a):a(jQuery)})(function(){function d(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}var a="isobar_youtube";$.youtube=$.youtube||{};var c=false;window.onYouTubePlayerReady=function(a){$("#"+a).parent().youtube("setReady");$("#"+a).parent().youtube("setPlayer",swfobject.getObjectById(a));$("#"+a).parent().trigger($.fn.youtube.events.READY,[]);swfobject.getObjectById(a).addEventListener("onStateChange","on_"+a+"_StateChange")};$.fn.youtube=function(c){if(typeof c=="string"){var e=Array.prototype.slice.call(arguments,1);if(c.substr(0,3)=="get"){if(this.length==0)return null;var d=this.eq(0).data(a);return d&&d[c]?d[c].apply(d,e):null}else return this.each(function(){var b=$(this).data(a);b&&b[c]&&b[c].apply(b,e)})}else return this.each(function(){var d=new b;d._setting=$.extend(true,{},$.fn.youtube.settings,c);d._element=this;d._init();$(this).data(a,d)})};$.fn.youtube.settings={videoId:undefined,css:{position:"absolute"},width:"100%",height:"100%",quality:null,playerVars:{rel:0,autoplay:0,controls:0,disablekb:1,showinfo:0,iv_load_policy:3,modestbranding:1,autohide:1,loop:1,border:0,start:0,wmode:"opaque",theme:"light"}};$.fn.youtube.events={READY:"youtube:ready",STATE_CHANGE:"youtube:statechange",START:"youtube:start",PLAY:"youtube:play",PAUSE:"youtube:pause",BUFFER:"youtube:buffer",STOP:"youtube:stop",CUED:"youtube:cued",UNSTARTED:"youtube:unstarted"};function b(){}$.extend(b.prototype,{_setting:$.fn.youtube.settings,_element:null,_playerElementID:"a",_playerMaskElement:null,_player:null,_isReady:false,_isStart:false,_currVideoId:null,mute:function(){var a=this;a._player.mute()},unMute:function(){var a=this;a._player.unMute()},pause:function(){var a=this;a._player.pauseVideo()},stop:function(){var a=this;a._player.stopVideo()},play:function(a,c){var b=this;if(a){b._currVideoId=a;b._player.loadVideoById(a,c)}else b._player.playVideo()},seekTo:function(a){var b=this;b._player.seekTo(a)},change:function(a){var b=this;b._currVideoId=a;b._player.cueVideoById(a)},resetStauts:function(){var a=this;a._isReady=false;a._isStart=false},setReady:function(){var a=this;a._isReady=true},resetReady:function(){var a=this;a._isReady=false},resetStart:function(){var a=this;a._isStart=false},setPlayer:function(a){var b=this;b._player=a},getIsMute:function(){var a=this;return a._player.isMuted()},getPlayer:function(){var a=this;return a._player},getDuration:function(){var a=this;return a._player.getDuration()},getPlayerState:function(){var a=this;return a._player.getPlayerState()},getCurrentTime:function(){var a=this;return a._player.getCurrentTime()},getVideoData:function(){var a=this;return a._player.getVideoData()},getBufferDuration:function(){var a=this;return a._player.getDuration()*(a._player.getVideoBytesLoaded()/a._player.getVideoBytesTotal())},getIsReady:function(){var a=this;return a._isReady},getIsStart:function(){var a=this;return a._isStart},getVideoID:function(){var a=this;return a._currVideoId},_processStateChange:function(b){var a=this;switch(b){case-1:$(a._element).trigger($.fn.youtube.events.UNSTARTED,[]);break;case 5:$(a._element).trigger($.fn.youtube.events.CUED,[]);break;case 1:if(!a._isStart){a._isStart=true;$(a._element).trigger($.fn.youtube.events.START,[])}$(a._element).trigger($.fn.youtube.events.PLAY,[]);break;case 2:$(a._element).trigger($.fn.youtube.events.PAUSE,[]);break;case 3:$(a._element).trigger($.fn.youtube.events.BUFFER,[]);a._setting.quality&&!a._isStart&&a._player.setPlaybackQuality(a._setting.quality);break;case 0:$(a._element).trigger($.fn.youtube.events.STOP,[])}},_init:function(){var a=this;a._playerElementID+=d();$.extend(a._setting.css,{width:typeof a._setting.width=="string"&&a._setting.width.indexOf("%")>-1?a._setting.width:parseInt(a._setting.width)+"px",height:typeof a._setting.height=="string"&&a._setting.height.indexOf("%")>-1?a._setting.height:parseInt(a._setting.height)+"px"});$("<div />").css(a._setting.css).attr("id",a._playerElementID).appendTo(a._element);var e={videoId:a._setting.videoId,width:a._setting.width,height:a._setting.height,playerVars:a._setting.playerVars};a._currVideoId=a._setting.videoId;if(c){e.events={onReady:function(b){a._isReady=true;$(a._element).trigger($.fn.youtube.events.READY,[b])},onStateChange:function(b){$(a._element).trigger($.fn.youtube.events.STATE_CHANGE,[b]);a._processStateChange(b.data)}};a._player=new YT.Player(a._playerElementID,e)}else{window["on_"+a._playerElementID+"_StateChange"]=function(b){$(a._element).trigger($.fn.youtube.events.STATE_CHANGE,[{data:b}]);a._processStateChange(b)};var i={quality:"high",scale:"noscale ",wmode:"opaque",allowscriptaccess:"always",bgcolor:"#FFFFFF"},f=$.extend({enablejsapi:1,playerapiid:a._playerElementID},e.playerVars),h={id:a._playerElementID,name:a._playerElementID},b="";for(var g in f){if(b!="")b+="&";b+=encodeURIComponent(g)+"="+encodeURIComponent(f[g])}swfobject.embedSWF("http://www.youtube.com/v/"+a._setting.videoId+"?"+b,a._playerElementID,a._setting.height,"100%","10.0.0",null,null,i,h)}}});$.youtube.init=function(e){var a=$.Deferred();if(e){c=true;window.onYouTubeIframeAPIReady=function(){a.resolve()};var d=document.createElement("script");d.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b)}else a.resolve();return a.promise()}})