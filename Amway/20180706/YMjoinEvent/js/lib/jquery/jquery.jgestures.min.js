(function(a){typeof define==="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(){(function(a){a.jGestures={};a.jGestures.defaults={};a.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}};a.jGestures.defaults.thresholdPinchopen=.05;a.jGestures.defaults.thresholdPinchmove=.05;a.jGestures.defaults.thresholdPinch=.05;a.jGestures.defaults.thresholdPinchclose=.05;a.jGestures.defaults.thresholdRotatecw=5;a.jGestures.defaults.thresholdRotateccw=5;a.jGestures.defaults.thresholdMove=20;a.jGestures.defaults.thresholdSwipe=100;a.jGestures.data={};a.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"];a.jGestures.data.hasGestures=function(){for(var b=0;b<a.jGestures.data.capableDevicesInUserAgentString.length;b++)if(navigator.userAgent.indexOf(a.jGestures.data.capableDevicesInUserAgentString[b])!==-1)return true;return false}();a.hasGestures=a.jGestures.data.hasGestures;a.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"};jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(b,k){jQuery.event.special[k]={setup:function(){var k=b.split("_"),n=k[0],m=k[1].slice(0,k[1].length-2),c=jQuery(this),d,l;if(!c.data("ojQueryGestures")||!c.data("ojQueryGestures")[n]){d=c.data("ojQueryGestures")||{};l={};l[n]=true;a.extend(true,d,l);c.data("ojQueryGestures",d);if(a.hasGestures)switch(m){case"orientationchange":c.get(0).addEventListener("orientationchange",g,false);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":c.get(0).addEventListener("devicemotion",i,false);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":c.get(0).addEventListener("touchstart",f,false);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":c.get(0).addEventListener("gesturestart",e,false);c.get(0).addEventListener("gestureend",j,false);break;case"pinch":case"rotate":c.get(0).addEventListener("gesturestart",e,false);c.get(0).addEventListener("gesturechange",h,false)}else switch(m){case"tap":case"swipe":c.bind("mousedown",f)}}return false},add:function(a){var c=jQuery(this),b=c.data("ojQueryGestures");b[a.type]={originalType:a.type};return false},remove:function(c){var b=jQuery(this),a=b.data("ojQueryGestures");a[c.type]=false;b.data("ojQueryGestures",a);return false},teardown:function(){var m=b.split("_"),p=m[0],o=m[1].slice(0,m[1].length-2),k=jQuery(this),l,n;if(!k.data("ojQueryGestures")||!k.data("ojQueryGestures")[p]){l=k.data("ojQueryGestures")||{};n={};n[p]=false;a.extend(true,l,n);k.data("ojQueryGestures",l);if(a.hasGestures)switch(o){case"orientationchange":k.get(0).removeEventListener("orientationchange",g,false);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":k.get(0).removeEventListener("devicemotion",i,false);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":k.get(0).removeEventListener("touchstart",f,false);k.get(0).removeEventListener("touchmove",c,false);k.get(0).removeEventListener("touchend",d,false);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":k.get(0).removeEventListener("gesturestart",e,false);k.get(0).removeEventListener("gestureend",j,false);break;case"pinch":case"rotate":k.get(0).removeEventListener("gesturestart",e,false);k.get(0).removeEventListener("gesturechange",h,false)}else switch(o){case"tap":case"swipe":k.unbind("mousedown",f);k.unbind("mousemove",c);k.unbind("mouseup",d)}}return false}}});function b(a){a.startMove=a.startMove?a.startMove:{startX:null,startY:null,timestamp:null};var d=(new Date).getTime(),c,b;if(a.touches){b=[{lastX:a.deltaX,lastY:a.deltaY,moved:null,startX:a.screenX-a.startMove.screenX,startY:a.screenY-a.startMove.screenY}];c={vector:a.vector||null,orientation:window.orientation||null,lastX:b[0].lastX>0?+1:b[0].lastX<0?-1:0,lastY:b[0].lastY>0?+1:b[0].lastY<0?-1:0,startX:b[0].startX>0?+1:b[0].startX<0?-1:0,startY:b[0].startY>0?+1:b[0].startY<0?-1:0};b[0].moved=Math.sqrt(Math.pow(Math.abs(b[0].startX),2)+Math.pow(Math.abs(b[0].startY),2))}return{type:a.type||null,originalEvent:a.event||null,delta:b||null,direction:c||{orientation:window.orientation||null,vector:a.vector||null},duration:a.duration?a.duration:a.startMove.timestamp?d-a.timestamp:null,rotation:a.rotation||null,scale:a.scale||null,description:a.description||[a.type,":",a.touches,":",b[0].lastX!=0?b[0].lastX>0?"right":"left":"steady",":",b[0].lastY!=0?b[0].lastY>0?"down":"up":"steady"].join("")}}function g(){var b=["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"];a(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",b[window.orientation/90+1],window.orientation].join("")})}function i(h){var c,j=jQuery(window),i=j.data("ojQueryGestures"),e=a.jGestures.defaults.thresholdShake,f=i.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}},d={accelerationIncludingGravity:{x:h.accelerationIncludingGravity.x,y:h.accelerationIncludingGravity.y,z:h.accelerationIncludingGravity.z},shake:{eventCount:f.shake.eventCount,intervalsPassed:f.shake.intervalsPassed,intervalsFreeze:f.shake.intervalsFreeze},shakeleftright:{eventCount:f.shakeleftright.eventCount,intervalsPassed:f.shakeleftright.intervalsPassed,intervalsFreeze:f.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:f.shakefrontback.eventCount,intervalsPassed:f.shakefrontback.intervalsPassed,intervalsFreeze:f.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:f.shakeupdown.eventCount,intervalsPassed:f.shakeupdown.intervalsPassed,intervalsFreeze:f.shakeupdown.intervalsFreeze}},g,l,k;for(c in i){switch(c){case"shake":case"shakeleftright":case"shakefrontback":case"shakeupdown":g=[];l=[];g.push(c);if(++d[c].intervalsFreeze>e.freezeShakes&&d[c].intervalsFreeze<2*e.freezeShakes)break;d[c].intervalsFreeze=0;d[c].intervalsPassed++;if((c==="shake"||c==="shakeleftright")&&(d.accelerationIncludingGravity.x>e.leftright.sensitivity||d.accelerationIncludingGravity.x<-1*e.leftright.sensitivity)){g.push("leftright");g.push("x-axis")}if((c==="shake"||c==="shakefrontback")&&(d.accelerationIncludingGravity.y>e.frontback.sensitivity||d.accelerationIncludingGravity.y<-1*e.frontback.sensitivity)){g.push("frontback");g.push("y-axis")}if((c==="shake"||c==="shakeupdown")&&(d.accelerationIncludingGravity.z+9.81>e.updown.sensitivity||d.accelerationIncludingGravity.z+9.81<-1*e.updown.sensitivity)){g.push("updown");g.push("z-axis")}if(g.length>1)if(++d[c].eventCount==e.requiredShakes&&d[c].intervalsPassed<e.freezeShakes){j.triggerHandler(c,b({type:c,description:g.join(":"),event:h,duration:d[c].intervalsPassed*5}));d[c].eventCount=0;d[c].intervalsPassed=0;d[c].intervalsFreeze=e.freezeShakes+1}else if(d[c].eventCount==e.requiredShakes&&d[c].intervalsPassed>e.freezeShakes){d[c].eventCount=0;d[c].intervalsPassed=0}}k={};k.oDeviceMotionLastDevicePosition=d;j.data("ojQueryGestures",a.extend(true,i,k))}}function f(b){var e=jQuery(b.currentTarget);e.triggerHandler(a.jGestures.events.touchstart,b);if(a.hasGestures){b.currentTarget.addEventListener("touchmove",c,false);b.currentTarget.addEventListener("touchend",d,false)}else{e.bind("mousemove",c);e.bind("mouseup",d)}var h=e.data("ojQueryGestures"),f=b.touches?b.touches[0]:b,g={};g.oLastSwipemove={screenX:f.screenX,screenY:f.screenY,timestamp:(new Date).getTime()};g.oStartTouch={screenX:f.screenX,screenY:f.screenY,timestamp:(new Date).getTime()};e.data("ojQueryGestures",a.extend(true,h,g))}function c(c){var g=jQuery(c.currentTarget),e=g.data("ojQueryGestures"),f=!!c.touches,j=f?c.changedTouches[0].screenX:c.screenX,k=f?c.changedTouches[0].screenY:c.screenY,d=e.oLastSwipemove,m=j-d.screenX,n=k-d.screenY,h;if(!!e.oLastSwipemove){h=b({type:"swipemove",touches:f?c.touches.length:"1",screenY:k,screenX:j,deltaY:n,deltaX:m,startMove:d,event:c,timestamp:d.timestamp});g.triggerHandler(h.type,h)}var l={},i=c.touches?c.touches[0]:c;l.oLastSwipemove={screenX:i.screenX,screenY:i.screenY,timestamp:(new Date).getTime()};g.data("ojQueryGestures",a.extend(true,e,l))}function d(f){var g=jQuery(f.currentTarget),i=!!f.changedTouches,h=i?f.changedTouches.length:"1",p=i?f.changedTouches[0].screenX:f.screenX,q=i?f.changedTouches[0].screenY:f.screenY;g.triggerHandler(a.jGestures.events.touchendStart,f);if(a.hasGestures){f.currentTarget.removeEventListener("touchmove",c,false);f.currentTarget.removeEventListener("touchend",d,false)}else{g.unbind("mousemove",c);g.unbind("mouseup",d)}var j=g.data("ojQueryGestures"),k=Math.abs(j.oStartTouch.screenX-p)>a.jGestures.defaults.thresholdMove||Math.abs(j.oStartTouch.screenY-q)>a.jGestures.defaults.thresholdMove?true:false,n=Math.abs(j.oStartTouch.screenX-p)>a.jGestures.defaults.thresholdSwipe||Math.abs(j.oStartTouch.screenY-q)>a.jGestures.defaults.thresholdSwipe?true:false,r,o,v,s,t,e,m=["zero","one","two","three","four"],l;for(r in j){o=j.oStartTouch;v={};p=i?f.changedTouches[0].screenX:f.screenX;q=i?f.changedTouches[0].screenY:f.screenY;s=p-o.screenX;t=q-o.screenY;e=b({type:"swipe",touches:h,screenY:q,screenX:p,deltaY:t,deltaX:s,startMove:o,event:f,timestamp:o.timestamp});l=false;switch(r){case"swipeone":if(i===false&&h==1&&k===false)break;if(i===false||h==1&&k===true&&n===true){l=true;e.type=["swipe",m[h]].join("");g.triggerHandler(e.type,e)}break;case"swipetwo":if(i&&h==2&&k===true&&n===true){l=true;e.type=["swipe",m[h]].join("");g.triggerHandler(e.type,e)}break;case"swipethree":if(i&&h==3&&k===true&&n===true){l=true;e.type=["swipe",m[h]].join("");g.triggerHandler(e.type,e)}break;case"swipefour":if(i&&h==4&&k===true&&n===true){l=true;e.type=["swipe",m[h]].join("");g.triggerHandler(e.type,e)}break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":if(i&&k===true&&n===true){l=true;e.type=["swipe",e.delta[0].lastX!=0?e.delta[0].lastX>0?"right":"left":"",e.delta[0].lastY!=0?e.delta[0].lastY>0?"down":"up":""].join("");g.triggerHandler(e.type,e)}break;case"tapone":case"taptwo":case"tapthree":case"tapfour":if(k!==true&&l!==true&&m[h]==r.slice(3)){e.description=["tap",m[h]].join("");e.type=["tap",m[h]].join("");g.triggerHandler(e.type,e)}}var u={};g.data("ojQueryGestures",a.extend(true,j,u));g.data("ojQueryGestures",a.extend(true,j,u))}g.triggerHandler(a.jGestures.events.touchendProcessed,f)}function e(c){var b=jQuery(c.currentTarget);b.triggerHandler(a.jGestures.events.gesturestart,c);var e=b.data("ojQueryGestures"),d={};d.oStartTouch={timestamp:(new Date).getTime()};b.data("ojQueryGestures",a.extend(true,e,d))}function h(g){var h=jQuery(g.currentTarget),c,d,j,e,f=h.data("ojQueryGestures"),i;for(i in f)switch(i){case"pinch":c=g.scale;if(c<1&&c%1<1-a.jGestures.defaults.thresholdPinchclose||c>1&&c%1>a.jGestures.defaults.thresholdPinchopen){d=c<1?-1:+1;e=b({type:"pinch",scale:c,touches:null,startMove:f.oStartTouch,event:g,timestamp:f.oStartTouch.timestamp,vector:d,description:["pinch:",d,":",c<1?"close":"open"].join("")});h.triggerHandler(e.type,e)}break;case"rotate":c=g.rotation;if(c<1&&-1*c>a.jGestures.defaults.thresholdRotateccw||c>1&&c>a.jGestures.defaults.thresholdRotatecw){d=c<1?-1:+1;e=b({type:"rotate",rotation:c,touches:null,startMove:f.oStartTouch,event:g,timestamp:f.oStartTouch.timestamp,vector:d,description:["rotate:",d,":",c<1?"counterclockwise":"clockwise"].join("")});h.triggerHandler(e.type,e)}}}function j(d){var f=jQuery(d.currentTarget);f.triggerHandler(a.jGestures.events.gestureendStart,d);var c,e=f.data("ojQueryGestures"),g;for(g in e)switch(g){case"pinchclose":c=d.scale;c<1&&c%1<1-a.jGestures.defaults.thresholdPinchclose&&f.triggerHandler("pinchclose",b({type:"pinchclose",scale:c,vector:-1,touches:null,startMove:e.oStartTouch,event:d,timestamp:e.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case"pinchopen":c=d.scale;c>1&&c%1>a.jGestures.defaults.thresholdPinchopen&&f.triggerHandler("pinchopen",b({type:"pinchopen",scale:c,vector:+1,touches:null,startMove:e.oStartTouch,event:d,timestamp:e.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case"rotatecw":c=d.rotation;c>1&&c>a.jGestures.defaults.thresholdRotatecw&&f.triggerHandler("rotatecw",b({type:"rotatecw",rotation:c,vector:+1,touches:null,startMove:e.oStartTouch,event:d,timestamp:e.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case"rotateccw":c=d.rotation;c<1&&-1*c>a.jGestures.defaults.thresholdRotateccw&&f.triggerHandler("rotateccw",b({type:"rotateccw",rotation:c,vector:-1,touches:null,startMove:e.oStartTouch,event:d,timestamp:e.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}f.triggerHandler(a.jGestures.events.gestureendProcessed,d)}})(jQuery)})